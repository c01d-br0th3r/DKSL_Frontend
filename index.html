<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="utf-8">
    <title>문자중계 콘솔</title>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>

    <!-- 합쳐지고 최소화된 최신 CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">

    <!-- 부가적인 테마 -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css">

    <!-- 합쳐지고 최소화된 최신 자바스크립트 -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
    <style>


    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font: 13px Helvetica, Arial; }

    #board {
      width: 100%;
      height: 400px;
    }

    #awayTeamPlayers{
      width: 30%;
      float: left;
    }
    #awayTeamPlayers li{
      height: 30px;
    }

    #homeTeamPlayers{
      width: 30%;
      float: right;
    }
    #homeTeamPlayers li{
      height: 30px;
    }

    #nowSituation{
      width: 40%;
      height: 100%;
      background-color: green;
      float: left;
      padding-left: 80px;
      padding-right: 80px;
    }

    .base{
      width: 100px;
      height: 40px;
      border: 2px solid black;
      background-color: white;
      position: absolute;
    }

    #firstBase{
      margin-top: 150px;
      margin-left: 330px;
    }

    #secondBase{
      margin-top: 50px;
      margin-left: 150px;
    }

    #thirdBase{
      margin-top: 150px;
    }

    #counter{
      width: 100%;
      height: 150px;
      margin-top: 220px;
      background-color: gray;
      border: 1px solid black;
    }

    .countPlace{
      width: 100%;
      height: 30px;
      margin-top: 5px;
      margin-left: 5px;
    }

    .countPlace div{
      width: 25px;
      height: 25px;
      border-radius: 50%;
      margin-left: 3px;
      float: left;
    }

    .countPlace p{
      margin-right: 3px;
      float: left;
    }

    #strikeCount div{
      background-color: yellow;
    }

    #ballCount div{
      background-color: green;
    }

    #outCount div{
      background-color: red;
    }

    </style>
  </head>

  <body>

    <div class="container" id="board">

      <div id="awayTeamPlayers">
        <ul class="list-group">
        </ul>
      </div>

      <div id="nowSituation">
        <div class="dropdown dropdown-toggle base" data-toggle="dropdown" role="button" aria-expanded="false" id="firstBase">
          1루
        </div><span class="caret"></span>
        <ul class="dropdown-menu" role="menu">
          <li><a href="#">A리그</a></li>
          <li><a href="#">B리그</a></li>
          <li><a href="#">C리그</a></li>
          <li><a href="#">D리그</a></li>
        </ul>
        <div class="base" id="secondBase">
          2루
        </div>
        <div class="base" id="thirdBase">
          3루
        </div>
        <div id="counter">
          <div class="countPlace" id="ballCount">
            <p>B</p>
          </div>
          <div class="countPlace" id="strikeCount">
            <p>S</p>
          </div> 
          <div class="countPlace" id="outCount">
            <p>O</p>
          </div>
          <div id="nowBatterPitcher">
          </div>
        </div>
      </div>

      <div id="homeTeamPlayers">
        <ul class="list-group">
        </ul>
      </div>
    </div>

    <div class="container">

    <div class="btn-group-lg" id="pitching" style="margin-bottom: 10px">
      <div class="btn-group-justified">피칭 결과</div>
      <button class="btn btn-default" id="Ball">B</button>
      <button class="btn btn-default" id="Strike">S</button>
      <button class="btn btn-default" id="Foul">파울</button>
      <button class="btn btn-default" id="Swing">헛스윙</button>
      <button class="btn btn-default" id="Hit">타격</button>
      <button class="btn btn-default" id="HBP">몸에 맞는 공</button>
      <button class="btn btn-default" id="IBB">고의사구</button>
    </div>    

    <div class="btn-group-lg" id="hit_result" style="margin-bottom: 10px">
      <div class="btn-group-justified">타격 결과</div>
      <button type="button" class="btn btn-default outSitu">땅볼</button>
      <button type="button" class="btn btn-default outSitu">땅볼로 출루</button>
      <button type="button" class="btn btn-default outSitu">뜬공</button>
      <button type="button" class="btn btn-default outSitu">직선타</button>
      <button type="button" class="btn btn-default outSitu">희생플라이</button>
      <button type="button" class="btn btn-default outSitu">희생번트</button>
      <button type="button" class="btn btn-default outSitu">병살타</button>
      <button type="button" class="btn btn-default outSitu">직선타병살</button>
      <button type="button" class="btn btn-default outSitu">삼중살</button>
      <button type="button" class="btn btn-default hitSitu">안타</button>
      <button type="button" class="btn btn-default hitSitu">내야안타</button>
      <button type="button" class="btn btn-default hitSitu">2루타</button>
      <button type="button" class="btn btn-default hitSitu">3루타</button>
      <button type="button" class="btn btn-default hitSitu">그라운드 홈런</button>
      <button type="button" class="btn btn-default hitSitu">홈런</button>
      <button type="button" class="btn btn-default outSitu">번트땅볼</button>
      <button type="button" class="btn btn-default outSitu">번트뜬공</button>
      <button type="button" class="btn btn-default hitSitu">번트안타</button>
      <button type="button" class="btn btn-default hitSitu">야수선택</button>
    </div>
    
    <div class="btn-group-lg" id="fielder" style="margin-bottom: 10px">
      <div class="btn-group-justified">타격상황 포지션</div>
      <button class="btn btn-default pos">투수</button>
      <button class="btn btn-default pos">포수</button>
      <button class="btn btn-default pos">1루수</button>
      <button class="btn btn-default pos">2루수</button>
      <button class="btn btn-default pos">3루수</button>
      <button class="btn btn-default pos">유격수</button>
      <button class="btn btn-default pos">좌익수</button>
      <button class="btn btn-default pos">좌중간</button>
      <button class="btn btn-default pos">중견수</button>
      <button class="btn btn-default pos">우중간</button>
      <button class="btn btn-default pos">우익수</button>
    </div>

    <div class="btn-group-lg" id="location" style="margin-bottom: 10px">
      <div class="btn-group-justified">타격상황 포지션 상세위치</div>
      <button class="btn btn-default loc">앞</button>
      <button class="btn btn-default loc">왼쪽</button>
      <button class="btn btn-default loc">오른쪽</button>
      <button class="btn btn-default loc">뒤</button>
    </div>

    <div class="panel panel-default" id="sendScript">
      <div class="panel-heading">
        전송 할 내용
      </div>
      <div class="panel-body" id="scriptContents">
      </div>
      <button class="btn btn-default" type="button" id="clearText">초기화</button>
      <button class="btn btn-default" type="button" id="sendText">전송</button>
    </div>

  </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
    <script src="/script/resultCode.js"></script>
    <script src="/script/gameInfo.js"></script>
    <script src="/script/consoleWork.js"></script>
    <script>

      function isEmptyObject(param) {
        return Object.keys(param).length === 0 && param.constructor === Object;
      }
      
      const gameId = $(location).attr('pathname').split('/')[2] * 1;
      const socket = io();

      var liveInfo = [];

      var nowPitchCount = 1;

      var awayPlayer = [];
      var homePlayer = [];
            
      var textForSend = "";
      var situationType = 0;

      const setNowPlayer = function (){
        var tmp = "";

        tmp += "현재 타자 : " + liveInfo[ofTeam[liveInfo.nowTopBottom]].batterInfo[liveInfo[ofTeam[liveInfo.nowTopBottom]].nowBatter - 1].name + "<br/>";
        tmp += "현재 투수 : " + liveInfo[dfTeam[liveInfo.nowTopBottom]].pitcherInfo[liveInfo[dfTeam[liveInfo.nowTopBottom]].nowPitcher].name;

        $("#nowBatterPitcher").html(tmp);
      }
      const setCountBoard = function (){
        $("#ballCount").html("<p>B</p>");
        $("#strikeCount").html("<p>S</p>");
        $("#outCount").html("<p>O</p>");

        for (var i = 0; i < liveInfo.nowCount.Ball; i++)
          $("#ballCount").append("<div></div>");
        for (var i = 0; i < liveInfo.nowCount.Strike; i++)
          $("#strikeCount").append("<div></div>");
        for (var i = 0; i < liveInfo.nowCount.Out; i++)
          $("#outCount").append("<div></div>");
      }

      const clearText =  function (){
        textForSend = "";
        $("#scriptContents").html("");
      };
      const inputText = function (text){
        if (textForSend != ""){
          alert("이미 입력한 내용부터 전송해주세요.");
          return false;
        }
        else {
          textForSend += text;
          $("#scriptContents").html(textForSend);
          return true;
        }
      };
      const sendText = function () {
        liveInfo.textCast[liveInfo.nowInning - 1] += textForSend;
        socket.emit("renewLive", gameId, liveInfo);
        clearText();
        $("#sendText").unbind("click");
        setNowPlayer();
        renewBase();
      }
      const clearTextandAction = function (){
        if(confirm("정말 보낼 내용을 초기화하시겠습니까? (상황도 이루어지지 않습니다.)")){
          clearText();
          // 콘솔 토글작동 상황 버튼 숨김처리
          $("#hit_result").hide();
          $("#fielder").hide();
          $("#location").hide();

          $("#sendText").unbind("click");
        }
      }

      $(document).on("ready", function (){

        socket.emit("getLiveCast", gameId);

        socket.on("sendLiveCast", (live) => {

          liveInfo = live;

          setCountBoard();

          // 새 이닝
          newInning = () => {

            liveInfo.nowCount.Ball = 0;
            liveInfo.nowCount.Strike = 0;
            liveInfo.nowCount.Out = 0;

            if (liveInfo.nowTopBottom == 0){
              liveInfo.nowTopBottom = 1;
              teamName = liveInfo.home.name;
            }
            else {
              liveInfo.nowInning++;
              liveInfo.nowTopBottom = 0;
              teamName = liveInfo.away.name;
            }

            textForSend += ("<br/>" + liveInfo.nowInning + TopBottom[liveInfo.nowTopBottom] + " " + teamName + " 공격<br/>");

            clearBase();
            renewBase();

          }

          // 다음타자
          nextBatter = () => {

            nowPitchCount = 1;
            liveInfo[ofTeam[liveInfo.nowTopBottom]].nowBatter++;

            if (liveInfo[ofTeam[liveInfo.nowTopBottom]].nowBatter > 9) liveInfo[ofTeam[liveInfo.nowTopBottom]].nowBatter = 1;

            textForSend += ("<br/>" + liveInfo[ofTeam[liveInfo.nowTopBottom]].nowBatter + "번 타자 " + liveInfo[ofTeam[liveInfo.nowTopBottom]].batterInfo[liveInfo[ofTeam[liveInfo.nowTopBottom]].nowBatter - 1].name + "<br/>");

            liveInfo.nowCount.Ball = 0;
            liveInfo.nowCount.Strike = 0;

          }

          // 볼
          ball = () => {

            nowPitchCount++;
            liveInfo.nowCount.Ball++;

            liveInfo[dfTeam[liveInfo.nowTopBottom]].pitcherInfo[liveInfo[dfTeam[liveInfo.nowTopBottom]].nowPitcher].NP++;
            liveInfo[dfTeam[liveInfo.nowTopBottom]].pitcherInfo[liveInfo[dfTeam[liveInfo.nowTopBottom]].nowPitcher].B++;

            if (liveInfo.nowCount.Ball >= 4){
              baseOnBalls();
            }

          }

          // 스트라이크
          strike = (isFoul) => {

            nowPitchCount++;
            liveInfo.nowCount.Strike++;

            if (liveInfo.nowCount.Strike >= 3){
              if (isFoul){
                liveInfo.nowCount.Strike--;
              }
              else{
                strikeOut();
              }
            }

            liveInfo[dfTeam[liveInfo.nowTopBottom]].pitcherInfo[liveInfo[dfTeam[liveInfo.nowTopBottom]].nowPitcher].NP++;
            liveInfo[dfTeam[liveInfo.nowTopBottom]].pitcherInfo[liveInfo[dfTeam[liveInfo.nowTopBottom]].nowPitcher].S++;

          }

          // 삼진
          strikeOut = () => {

            textForSend += (liveInfo[ofTeam[liveInfo.nowTopBottom]].batterInfo[liveInfo[ofTeam[liveInfo.nowTopBottom]].nowBatter - 1].name + " : 삼진 아웃<br/>");

            // 타자스탯 누적
            liveInfo[ofTeam[liveInfo.nowTopBottom]].batterInfo[liveInfo[ofTeam[liveInfo.nowTopBottom]].nowBatter - 1].result[liveInfo.nowInning - 1].push(resultCode["삼진"]);
            liveInfo[ofTeam[liveInfo.nowTopBottom]].batterInfo[liveInfo[ofTeam[liveInfo.nowTopBottom]].nowBatter - 1].stat.PA++;
            liveInfo[ofTeam[liveInfo.nowTopBottom]].batterInfo[liveInfo[ofTeam[liveInfo.nowTopBottom]].nowBatter - 1].stat.AB++;
            liveInfo[ofTeam[liveInfo.nowTopBottom]].batterInfo[liveInfo[ofTeam[liveInfo.nowTopBottom]].nowBatter - 1].stat.SO++;

            // 투수스탯 누적
            liveInfo[dfTeam[liveInfo.nowTopBottom]].pitcherInfo[liveInfo[dfTeam[liveInfo.nowTopBottom]].nowPitcher].PA++;
            liveInfo[dfTeam[liveInfo.nowTopBottom]].pitcherInfo[liveInfo[dfTeam[liveInfo.nowTopBottom]].nowPitcher].AB++;
            liveInfo[dfTeam[liveInfo.nowTopBottom]].pitcherInfo[liveInfo[dfTeam[liveInfo.nowTopBottom]].nowPitcher].SO++;

            Out();

          }

          // 볼넷
          baseOnBalls = () => {

            textForSend += (liveInfo[ofTeam[liveInfo.nowTopBottom]].batterInfo[liveInfo[ofTeam[liveInfo.nowTopBottom]].nowBatter - 1].name + " : 볼넷<br/>");

            // 타자스탯 누적
            liveInfo[ofTeam[liveInfo.nowTopBottom]].batterInfo[liveInfo[ofTeam[liveInfo.nowTopBottom]].nowBatter - 1].result[liveInfo.nowInning - 1].push(resultCode["볼넷"]);
            liveInfo[ofTeam[liveInfo.nowTopBottom]].batterInfo[liveInfo[ofTeam[liveInfo.nowTopBottom]].nowBatter - 1].stat.PA++;
            liveInfo[ofTeam[liveInfo.nowTopBottom]].batterInfo[liveInfo[ofTeam[liveInfo.nowTopBottom]].nowBatter - 1].stat.BB++;

            // 만루
            if (!isEmptyObject(liveInfo.nowBase[0]) && !isEmptyObject(liveInfo.nowBase[1]) && !isEmptyObject(liveInfo.nowBase[2])){
              textForSend += ("3루 주자 " + liveInfo.nowBase[2].name + " : 홈인<br/>");
              liveInfo[ofTeam[liveInfo.nowTopBottom]].score[liveInfo.nowInning - 1]++;
              liveInfo[ofTeam[liveInfo.nowTopBottom]].totalScore++;

              // 주자 득점 증가
              liveInfo.nowBase[2].stat.R++;

              // 타자 타점 증가
              liveInfo[ofTeam[liveInfo.nowTopBottom]].batterInfo[liveInfo[ofTeam[liveInfo.nowTopBottom]].nowBatter - 1].stat.RBI++;

              textForSend += ("2루 주자 " + liveInfo.nowBase[1].name + " : 3루까지 진루<br/>");
              liveInfo.nowBase[2] = liveInfo.nowBase[1];

              textForSend += ("1루 주자 " + liveInfo.nowBase[0].name + " : 2루까지 진루<br/>"); 
              liveInfo.nowBase[1] = liveInfo.nowBase[0]; 
            }
            // 1,2루
            else if (!isEmptyObject(liveInfo.nowBase[0]) && !isEmptyObject(liveInfo.nowBase[1])){
              textForSend += ("2루 주자 " + liveInfo.nowBase[1].name + " : 3루까지 진루<br/>");
              liveInfo.nowBase[2] = liveInfo.nowBase[1];

              textForSend += ("1루 주자 " + liveInfo.nowBase[0].name + " : 2루까지 진루<br/>"); 
              liveInfo.nowBase[1] = liveInfo.nowBase[0]; 
            }
            // 1루
            else if (!isEmptyObject(liveInfo.nowBase[0])){
              textForSend += ("1루 주자 " + liveInfo.nowBase[0].name + " : 2루까지 진루<br/>"); 
              liveInfo.nowBase[1] = liveInfo.nowBase[0]; 
            }
            

            liveInfo.nowBase[0] = liveInfo[ofTeam[liveInfo.nowTopBottom]].batterInfo[liveInfo[ofTeam[liveInfo.nowTopBottom]].nowBatter - 1]; 

            // 투수스탯 누적
            liveInfo[dfTeam[liveInfo.nowTopBottom]].pitcherInfo[liveInfo[dfTeam[liveInfo.nowTopBottom]].nowPitcher].PA++;
            liveInfo[dfTeam[liveInfo.nowTopBottom]].pitcherInfo[liveInfo[dfTeam[liveInfo.nowTopBottom]].nowPitcher].BB++;

            nextBatter();

          }

          // 사구
          hitByPitch = () => {

            // 타자스탯 누적
            liveInfo[ofTeam[liveInfo.nowTopBottom]].batterInfo[liveInfo[ofTeam[liveInfo.nowTopBottom]].nowBatter - 1].result[liveInfo.nowInning - 1].push(resultCode["사구"]);
            liveInfo[ofTeam[liveInfo.nowTopBottom]].batterInfo[liveInfo[ofTeam[liveInfo.nowTopBottom]].nowBatter - 1].stat.PA++;
            liveInfo[ofTeam[liveInfo.nowTopBottom]].batterInfo[liveInfo[ofTeam[liveInfo.nowTopBottom]].nowBatter - 1].stat.HBP++;

            // 주자 이동
            // 만루
            if (!isEmptyObject(liveInfo.nowBase[0]) && !isEmptyObject(liveInfo.nowBase[1]) && !isEmptyObject(liveInfo.nowBase[2])){
              textForSend += ("3루 주자 " + liveInfo.nowBase[2].name + " : 홈인<br/>");
              liveInfo[ofTeam[liveInfo.nowTopBottom]].score[liveInfo.nowInning - 1]++;
              liveInfo[ofTeam[liveInfo.nowTopBottom]].totalScore++;

              // 주자 득점 증가
              liveInfo.nowBase[2].stat.R++;

              // 타자 타점 증가
              liveInfo[ofTeam[liveInfo.nowTopBottom]].batterInfo[liveInfo[ofTeam[liveInfo.nowTopBottom]].nowBatter - 1].stat.RBI++;

              textForSend += ("2루 주자 " + liveInfo.nowBase[1].name + " : 3루까지 진루<br/>");
              liveInfo.nowBase[2] = liveInfo.nowBase[1];

              textForSend += ("1루 주자 " + liveInfo.nowBase[0].name + " : 2루까지 진루<br/>"); 
              liveInfo.nowBase[1] = liveInfo.nowBase[0]; 
            }
            // 1,2루
            else if (!isEmptyObject(liveInfo.nowBase[0]) && !isEmptyObject(liveInfo.nowBase[1])){
              textForSend += ("2루 주자 " + liveInfo.nowBase[1].name + " : 3루까지 진루<br/>");
              liveInfo.nowBase[2] = liveInfo.nowBase[1];

              textForSend += ("1루 주자 " + liveInfo.nowBase[0].name + " : 2루까지 진루<br/>"); 
              liveInfo.nowBase[1] = liveInfo.nowBase[0]; 
            }
            // 1루
            else if (!isEmptyObject(liveInfo.nowBase[0])){
              textForSend += ("1루 주자 " + liveInfo.nowBase[0].name + " : 2루까지 진루<br/>"); 
              liveInfo.nowBase[1] = liveInfo.nowBase[0]; 
            }
            

            liveInfo.nowBase[0] = liveInfo[ofTeam[liveInfo.nowTopBottom]].batterInfo[liveInfo[ofTeam[liveInfo.nowTopBottom]].nowBatter - 1]; 

            liveInfo[dfTeam[liveInfo.nowTopBottom]].pitcherInfo[liveInfo[dfTeam[liveInfo.nowTopBottom]].nowPitcher].PA++;
            liveInfo[dfTeam[liveInfo.nowTopBottom]].pitcherInfo[liveInfo[dfTeam[liveInfo.nowTopBottom]].nowPitcher].HBP++;

            nextBatter();

          }

          // 고의사구
          internationalBB = () => {

            // 타자스탯 누적
            liveInfo[ofTeam[liveInfo.nowTopBottom]].batterInfo[liveInfo[ofTeam[liveInfo.nowTopBottom]].nowBatter - 1].result[liveInfo.nowInning - 1].push(resultCode["고의사구"]);
            liveInfo[ofTeam[liveInfo.nowTopBottom]].batterInfo[liveInfo[ofTeam[liveInfo.nowTopBottom]].nowBatter - 1].stat.PA++;
            liveInfo[ofTeam[liveInfo.nowTopBottom]].batterInfo[liveInfo[ofTeam[liveInfo.nowTopBottom]].nowBatter - 1].stat.BB++;

            // 만루
            if (!isEmptyObject(liveInfo.nowBase[0]) && !isEmptyObject(liveInfo.nowBase[1]) && !isEmptyObject(liveInfo.nowBase[2])){
              textForSend += ("3루 주자 " + liveInfo.nowBase[2].name + " : 홈인<br/>");
              liveInfo[ofTeam[liveInfo.nowTopBottom]].score[liveInfo.nowInning - 1]++;
              liveInfo[ofTeam[liveInfo.nowTopBottom]].totalScore++;

              // 주자 득점 증가
              liveInfo.nowBase[2].stat.R++;

              // 타자 타점 증가
              liveInfo[ofTeam[liveInfo.nowTopBottom]].batterInfo[liveInfo[ofTeam[liveInfo.nowTopBottom]].nowBatter - 1].stat.RBI++;


              textForSend += ("2루 주자 " + liveInfo.nowBase[1].name + " : 3루까지 진루<br/>");
              liveInfo.nowBase[2] = liveInfo.nowBase[1];

              textForSend += ("1루 주자 " + liveInfo.nowBase[0].name + " : 2루까지 진루<br/>"); 
              liveInfo.nowBase[1] = liveInfo.nowBase[0]; 
            }
            // 1,2루
            else if (!isEmptyObject(liveInfo.nowBase[0]) && !isEmptyObject(liveInfo.nowBase[1])){
              textForSend += ("2루 주자 " + liveInfo.nowBase[1].name + " : 3루까지 진루<br/>");
              liveInfo.nowBase[2] = liveInfo.nowBase[1];

              textForSend += ("1루 주자 " + liveInfo.nowBase[0].name + " : 2루까지 진루<br/>"); 
              liveInfo.nowBase[1] = liveInfo.nowBase[0]; 
            }
            // 1루
            else if (!isEmptyObject(liveInfo.nowBase[0])){
              textForSend += ("1루 주자 " + liveInfo.nowBase[0].name + " : 2루까지 진루<br/>"); 
              liveInfo.nowBase[1] = liveInfo.nowBase[0]; 
            }
            

            liveInfo.nowBase[0] = liveInfo[ofTeam[liveInfo.nowTopBottom]].batterInfo[liveInfo[ofTeam[liveInfo.nowTopBottom]].nowBatter - 1]; 

            liveInfo[dfTeam[liveInfo.nowTopBottom]].pitcherInfo[liveInfo[dfTeam[liveInfo.nowTopBottom]].nowPitcher].PA++;
            liveInfo[dfTeam[liveInfo.nowTopBottom]].pitcherInfo[liveInfo[dfTeam[liveInfo.nowTopBottom]].nowPitcher].BB++;

            nextBatter();

          }

          // 아웃처리
          Out = () => {

            liveInfo.nowCount.Out++;

            if (liveInfo.nowCount.Out >= 3){
              sendText();
              newInning();
              nextBatter();
              sendText();
            }
            else {
              nextBatter();
            }

          }

          // 베이스 상황판 갱신
          renewBase = () => {

            $("#firstBase").html("");
            $("#secondBase").html("");
            $("#thirdBase").html("");

            $("#firstBase").html(liveInfo.nowBase[0].name);
            $("#secondBase").html(liveInfo.nowBase[1].name);
            $("#thirdBase").html(liveInfo.nowBase[2].name);

          }

          // 베이스 삭제
          clearBase = () => {
            for (var i in liveInfo.nowBase){
              liveInfo.nowBase[i] = {};
            }
          }

          $("#awayTeamPlayers").children("ul").html("");
          $("#homeTeamPlayers").children("ul").html("");

          $("#awayTeamPlayers").children("ul").append("<div class=\"list-group-item-heading\" id=\"awayTeamName\">" + live.away.name + "</li>");
          for (i in live.away.batterInfo)
            $("#awayTeamPlayers").children("ul").append("<li class=\"list-group-item\">" + live.away.batterInfo[i].name + "</li>");

          $("#homeTeamPlayers").children("ul").append("<div class=\"list-group-item-heading\" id=\"homeTeamName\">" + live.home.name + "</li>");
          for (i in live.home.batterInfo)
            $("#homeTeamPlayers").children("ul").append("<li class=\"list-group-item\">" + live.home.batterInfo[i].name + "</li>");

          // 시작되지 않았을 시
          if (liveInfo.nowInning == 0){
            console.log("START");
            newInning();
            nextBatter();
            sendText();
          }

          setNowPlayer();
          renewBase();

        });

      });


      $(window).on("load", function (){

          // 콘솔 토글작동 상황 버튼 숨김처리
          $("#hit_result").hide();
          $("#fielder").hide();
          $("#location").hide();

          $("#clearText").click(function(event) {
            clearTextandAction();
          });

          // 볼 버튼 클릭 시
          $("#Ball").click(function(event){
            if(inputText(nowPitchCount + "구 : 볼<br/>")){
              $("#sendText").click(function(event) {
                ball();
                sendText();
                setCountBoard();
              });
            }
          });

          // 스트라이크 
          $("#Strike").click(function(event){
            if(inputText(nowPitchCount + "구 : 스트라이크<br/>")){
              $("#sendText").click(function(event) {
                strike(false);
                sendText();
                setCountBoard();
              });
            }
          });

          // 파울
          $("#Foul").click(function(event){
            if (inputText(nowPitchCount + "구 : 파울<br/>")){
              $("#sendText").click(function(event) {
                strike(true);
                sendText();
                setCountBoard();
              });
            }
          });

          // 헛스윙
          $("#Swing").click(function(event){
            if (inputText(nowPitchCount + "구 : 헛스윙<br/>"));
            $("#sendText").click(function(event) {
                strike(false);
                sendText();
                setCountBoard();
            });
          });

          //타격
          $("#Hit").click(function(event) {
            
            if (inputText(nowPitchCount + "구 : 타격<br/>")){
              $("#hit_result").show();
            }
            
          });

          // 몸에 맞는 공
          $("#HBP").click(function(event){
            if(inputText(nowPitchCount + "구 : 볼<br/>" + liveInfo[ofTeam[liveInfo.nowTopBottom]].batterInfo[liveInfo[ofTeam[liveInfo.nowTopBottom]].nowBatter - 1].name + " : 몸에 맞는 공<br/>")){
              $("#sendText").click(function(event) {
                hitByPitch();
                sendText();
                setCountBoard();
              });
            }
          });

          // 고의사구
          $("#IBB").click(function(event){
            if(inputText(liveInfo[ofTeam[liveInfo.nowTopBottom]].batterInfo[liveInfo[ofTeam[liveInfo.nowTopBottom]].nowBatter - 1].name + " : 고의사구<br/>")){
              $("#sendText").click(function(event) {
                internationalBB();
                sendText();
                setCountBoard();
              });
            }
          });

      });

    </script>

  </body>
</html>